<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f = "http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"> 
    <h:head>
        <p:button outcome="index" value="Pruebas Diseño" icon="ui-icon-star">		    
        </p:button>
        <meta charset="UTF-8" />
        <title>Asignar Perfil</title>
    </h:head>
    <h:body>
        <div>
            <h1>Asignar Perfiles</h1>
            <h:form id="usuariosFormulario">
                <p:selectOneMenu id="roles_select" value="#{asignarPerfilesBean.rol}">
                    <f:selectItem itemLabel="---- Seleccionar Rol ----" itemValue=""/>
                    <f:selectItems value="#{asignarPerfilesBean.roles}"/>
                    <p:ajax rendered="usuarios_table"></p:ajax>
                </p:selectOneMenu>
                <h:outputText value=" " />
                <p:commandButton update="usuariosFormulario" value="Consultar usuarios"/>
                <br/>
                <br/>
                <p:selectOneMenu id="roles_update_select" value="#{asignarPerfilesBean.rolUpdate}">
                    <f:selectItem itemLabel="---- Seleccionar Rol ----" itemValue=""/>
                    <f:selectItems value="#{asignarPerfilesBean.roles}"/>
                    <p:ajax rendered="usuarios_table"></p:ajax>
                </p:selectOneMenu>
                
                <p:dataTable id="usuarios_table" var="usuario" value="#{asignarPerfilesBean.usuarios}" selection="#{asignarPerfilesBean.selectedUsuarios}" rowKey="#{usuario.email}">                    			
                    <f:facet name="header">
                        Checkbox
                    </f:facet>
                    <p:column selectionMode="multiple" style="width:16px;text-align:center"/>
                    <p:column headerText="Nombres">
                        <h:outputText value="#{usuario.names}" />
                    </p:column>
                    <p:column headerText="Apellidos">
                        <h:outputText value="#{usuario.lastNames}" />
                    </p:column>
                    <p:column headerText="Correo">
                        <h:outputText value="#{usuario.email}" />
                    </p:column>
                    <p:column headerText="Carnet">
                        <h:outputText value="#{usuario.code}" />
                    </p:column>
                    <p:column headerText="Estado">
                        <h:outputText value="#{usuario.status}" />
                    </p:column>
                    <p:column headerText="Rol">
                        <h:outputText value="#{usuario.role}" />
                    </p:column>
                    <p:column headerText="Área">
                        <h:outputText value="#{usuario.area.name}" />
                    </p:column>	                    
                </p:dataTable>
                <p:commandButton update="usuariosFormulario" value="Actualizar Estado" action="#{asignarPerfilesBean.updateUsuarios()}"/>
            </h:form>
        </div>
    </h:body>
</html>